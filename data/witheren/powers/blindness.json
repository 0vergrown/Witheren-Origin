{
   "name":"Blindness",
   "description":"You're permanently blind, and entities are invisible to you unless they make noise. When they do, however, they're revealed regardless of line of sight.",
   "type":"origins:multiple",
   "blindness":{
      "type":"origins:stacking_status_effect",
      "min_stacks":-3,
      "max_stacks":1,
      "duration_per_stack":100,
      "tick_rate":20,
      "effect":{
         "effect":"minecraft:blindness",
         "is_ambient":true,
         "show_particles":true,
         "show_icon":false
      },
      "condition":{
         "type":"origins:in_block",
         "block_condition":{
            "type":"origins:height",
            "comparison":">=",
            "compare_to":50
         }
      }
   },
   "glow":{
      "type":"origins:entity_glow",
      "entity_condition":{
         "type":"origins:and",
         "conditions":[
            {
               "type":"origins:living"
            },
            {
               "type":"origins:or",
               "conditions":[
                  {
                     "type":"origins:resource",
                     "resource":"witheren:noise_duration",
                     "comparison":">",
                     "compare_to":0
                  },
                  {
                     "type":"origins:entity_type",
                     "entity_type":"minecraft:player",
                     "inverted":true
                  }
               ]
            }
         ]
      },
      "bientity_condition":{
         "type":"origins:distance",
         "comparison":"<=",
         "compare_to":30
      }
   },
   "shader":{
      "type":"origins:shader",
      "shader":"minecraft:shaders/post/sobel.json",
      "toggleable":false
   },
   "no_blind_effect":{
      "type":"origins:effect_immunity",
      "effects":[
         "minecraft:blindness"
      ],
      "condition":{
         "type":"origins:in_block",
         "block_condition":{
            "type":"origins:height",
            "comparison":"<=",
            "compare_to":50
         }
      }
   },
   "night_vision":{
      "type":"origins:night_vision",
      "strength":1.0,
      "condition":{
         "type":"origins:in_block",
         "block_condition":{
            "type":"origins:height",
            "comparison":"<=",
            "compare_to":50
         }
      }
   },
   "hide_entities":{
      "type":"origins:prevent_entity_render",
      "bientity_condition":{
         "type":"origins:and",
         "conditions":[
            {
               "type":"origins:or",
               "conditions":[
                  {
                     "type":"origins:distance",
                     "comparison":">=",
                     "compare_to":20
                  },
                  {
                     "type":"origins:target_condition",
                     "condition":{
                        "type":"origins:and",
                        "conditions":[
                           {
                              "type":"origins:living"
                           },
                           {
                              "type":"origins:resource",
                              "resource":"witheren:noise_duration",
                              "comparison":"==",
                              "compare_to":0
                           }
                        ]
                     }
                  }
               ]
            },
            {
               "type":"origins:distance",
               "comparison":"==",
               "compare_to":0,
               "inverted":true
            }
         ]
      }
   },
   "on_change":{
      "type":"origins:action_on_callback",
      "entity_action_chosen":{
         "type":"origins:execute_command",
         "command":"tag @s add witheren"
      },
      "entity_action_added":{
         "type":"origins:execute_command",
         "command":"tag @s add witheren"
      },
      "entity_action_respawned":{
         "type":"origins:execute_command",
         "command":"tag @s add witheren"
      },
      "entity_action_lost":{
         "type":"origins:clear_effect",
         "effect":"minecraft:blindness"
      },
      "entity_action_removed":{
         "type":"origins:execute_command",
         "command":"tag @s remove witheren"
      }
   }
}